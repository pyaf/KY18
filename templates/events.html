<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="description" content="Kashiyatra Campus Ambassador">
  <link rel="stylesheet" href="../static/css/main.css">
  <link href="https://fonts.googleapis.com/css?family=Exo:400,600,900" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Exo" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/animate.css">
  <link rel="stylesheet" href="/static/css/ca-form.css">
    </head>
<style>

a:link{
  text-decoration: none;

   input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    margin: 0; 
}

.ui-helper-hidden-accessible{
  display: none;

}
.ui-menu-item-wrapper{

  background: #f7f7f7;
  width: 30%;
}
ul {
  list-style-type: none;
}
}
</style>

  <body>
    <div class="row" style="width:100%;">
      <div class="container">
        <ul class="l-main-content main-content">
          <li class="l-section section section--is-active" style="background-image:url(../static/img/cap1.jpg);  background-repeat: no-repeat;
      background-size:1450px;background-position:center;background-attachment:fixed;" >


                     
                     <div class="intro">
              <div class="intro--banner"><a href="/">
<h1 style="font-family: 'Exo', sans-serif;">Kashiyatra</h1></a>
            
                <div id="navbar" class="navbar-collapse collapse" >
                    <ul class="menu nav navbar-nav pull-right list-inline" style="margin-right:11%;margin-top:0.5%">
                      {% if choosen == False %}
                      <li>
                        <a href="/ca-register"><i class="fa fa-user"></i> Become Campus Ambassador</a>
                      </li>
                      {% endif %}


                      <li>

<!-- <a href="/account/facebook/login/" style="color:white;"><button> Register / Login with Facebook
                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118" style="enable-background:new 0 0 150 118;" xml:space="preserve">
                  <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                    <path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z"/>
                  </g>
                  </svg>
                  <span class="btn-background"></span>
                </button></a>
 -->

                        <button >
                            <a href="/dashboard" style="color:white;">
                          <i class="fa fa-th"></i> Dashboard
                          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118" style="enable-background:new 0 0 150 118;" xml:space="preserve">
                  <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                    <path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z"/>
                  </g>
                  </svg>
                  <span class="btn-background"></span>
                        </a>
                      </button>
                      </li>
                            <li>

                              <button  id="dropdownMenu1" data-toggle="dropdown" style="color:white;">
                                <i class="fa fa-cog"></i> Settings
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118" style="enable-background:new 0 0 150 118;" xml:space="preserve">
                  <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                    <path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z"/>
                  </g>
                  </svg><span class="btn-background"></span>
                                <span class="caret"></span>
                              </button>
                              <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                <li role="separator" class="divider"></li>

                                <li>

                                <!-- setting to be done -->
                               
                                </li>
                              </ul>
                          </li>
                    </ul>
                </div>

        </nav>
<br><br><br>

 <div class="col-md-3" id="Cat">
   <br><br>

       <div class="panel panel-default" id="task-panel">
         <div class="panel-heading"><strong>Event Categories</strong></div>
           <div class="list-group tasks">

  <div class="panel-group" id="accordion">
    {% for parentevent in parentEvents %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse"  data-parent="#accordion" href="#collapse{{forloop.counter}}">{{ parentevent.categoryName }}</a>
        </h4>
      </div>
      <div id="collapse{{forloop.counter}}" class="panel-collapse collapse">
        <div class="panel-body">
        <div class="list-group tasks">
        {% for event in parentevent.event_set.all %}
         <button class="list-group-item " id="{{event.eventName}}{{forloop.counter}}" onclick="myFunc(this)">
           {{ event.eventName }}
         </button>
         {% endfor %}
    </div>
        </div>
      </div>
    </div>

    {% endfor %}
<br>
   

</div>
</div>
  </div>
   </div>
       <div class="col-md-9" id="details-table">

                   {% if messages %}
                   {% for msg in messages %}

                       <div class="alert alert-{{msg.tags}}">
                   <a href="#" class="close" data-dismiss="alert" aria-label="close">
                     &times;</a>
                   {{msg.message}}
                   </div>
                   {% endfor %}
                   </ul>
                   {% endif %}
                   <div><br /><br />

                     <div class="jumbotron">
  
                     </div>
                     {% for parentevent in parentEvents %}
                      {% for event in parentevent.event_set.all  %}
                      <div class="jumbotron" id="{{event.eventName}}{{forloop.counter}}" style="display:none;">
<div class="center-block" style="width:50px;">

                          <h2 >{{event.eventName}}</h2><br>
                        </div>
                        {% autoescape off %}{{ event.eventDetails  }}{% endautoescape %}

                        <br><br>
                      <a class="btn btn-default teambutton" id="__{{event.eventId}}" href="/events/teamRegister/{{event.eventName}}"> Team Registration</a>
                      {% if event.minMembers == 1 %}
                      <button class="btn btn-default indbutton" id="{{event.eventId}}" onclick="indFunc(this,'/events/individualRegister/')">Individual Registration</button>
                      {% endif %}
                    </div>

                      {%endfor%}
                      {%endfor%}
                   </div>

         </div>
       </div>

 </div>
<script src="/static/js/jquery-1.11.3.min.js"></script>
<script src="/static/js/bootstrap-3.3.5.min.js"></script>
<script src="/static/js/jquery.validate-1.14.0.min.js"></script>
<script src="/static/js/jquery-validate.bootstrap-tooltip.js"></script>
<script src="/static/js/ca-form.js" charset="utf-8"></script>


     <script>
        function myFunc(elem){
          var a=elem.getAttribute("id");
          var elems=document.getElementsByClassName("jumbotron");
          for (var i=0;i<elems.length;i+=1){
            elems[i].style.display = 'none';
            if(elems[i].getAttribute("id")==a)
              elems[i].style.display="block";
          }
          // var elemid=elems.getElementById(a);
          // elemid.style.display="block";

        }

function indFunc(elem,url){
  eventId = elem.getAttribute("id");
  //console.log(eventId);
  var kyId = "{{request.user.ky_id}}";
  //console.log(kyId);
$.ajax({
  url : url,
  type: 'POST',
  dataType: 'json',
  data: {'eventId': eventId,
          'ky_id' : kyId,
         'csrfmiddlewaretoken': '{{ csrf_token }}', },
  context: elem,
  success: function(data) {
          console.log(data['status']);
          if(data['status'] == 'registered'){

            $(elem).removeClass('btn-default').addClass('btn-success');
            $(elem).html("Registered!");
            // console.log(eventId);
            var p=((elem).getAttribute("id"));
            // console.log(document.getElementsByClassName(p);
            document.getElementById("__"+p).style.display="none";
          }
        }
})
// .done(function() {
//   console.log("success");


// })
// .fail(function() {
//   console.log("error");
// })
// .always(function() {
//   console.log("complete");
// });
}

$(document).ready(function() {
var elems=document.getElementsByClassName("indbutton");
for (var i=0;i<elems.length;i+=1){
  // var eventId = elems[i].getAttribute("id");
  // console.log(eventId['status']);
  indFunc(elems[i],'/regCheck/');
}

});

$.ajax({
  url: '/path/to/file',
  type: 'default GET (Other values: POST)',
  dataType: 'default: Intelligent Guess (Other values: xml, json, script, or html)',
  data: {param1: 'value1'}
})
.done(function() {
  console.log("success");
})
.fail(function() {
  console.log("error");
})
.always(function() {
  console.log("complete");
});

</script>
</body>
<script src="/static/js/jquery-1.11.3.min.js"></script>
<script src="/static/js/bootstrap-3.3.5.min.js"></script>
<script src="/static/js/jquery.validate-1.14.0.min.js"></script>
<script src="/static/js/jquery-validate.bootstrap-tooltip.js"></script>
<script src="/static/js/ca-form.js" charset="utf-8"></script>
</html>
